<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game Advanced</title>

<style>
body {
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: radial-gradient(circle at center, #001a00, #000);
    font-family: 'Courier New', monospace;
    color: #00ff99;
    overflow: hidden;
    position: relative;
}

/* Gaming animated background grid */
body::before {
    content: "";
    position: absolute;
    width: 200%;
    height: 200%;
    background-image: 
        linear-gradient(#00ff3322 1px, transparent 1px),
        linear-gradient(90deg, #00ff3322 1px, transparent 1px);
    background-size: 40px 40px;
    animation: moveGrid 8s linear infinite;
    z-index: -1;
}

@keyframes moveGrid {
    from { transform: translate(0,0); }
    to { transform: translate(-40px,-40px); }
}

h1 {
    margin: 10px;
    text-shadow: 0 0 15px #00ff99, 0 0 30px #00ff99;
    letter-spacing: 2px;
}

canvas {
    background: #001a00;
    border: 3px solid #00ff99;
    box-shadow: 0 0 25px #00ff99;
    border-radius: 12px;
}

/* Scanline effect */
canvas::after {
    content:"";
    position:absolute;
    width:100%;
    height:100%;
}

.score {
    margin: 8px;
    font-weight: bold;
    text-shadow: 0 0 10px #00ff99;
}

button {
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    background: #00ff99;
    font-weight: bold;
    cursor: pointer;
    margin: 5px;
    color: black;
    box-shadow: 0 0 15px #00ff99;
    transition: 0.3s;
}

button:hover {
    background: #00cc77;
    box-shadow: 0 0 25px #00ff99;
    transform: scale(1.05);
}

h4 {
    margin: 0;
    font-weight: normal;
    color: #00ff99;
    text-shadow: 0 0 10px #00ff99;
}

/* Pause Menu */
.pause-menu {
    position: absolute;
    background: rgba(0, 20, 0, 0.95);
    padding: 20px;
    border-radius: 12px;
    display: none;
    text-align: center;
    box-shadow: 0 0 30px #00ff99;
    border: 2px solid #00ff99;
}

.pause-menu input {
    width: 100%;
}

/* Mobile Controls */
.controls {
    margin-top: 10px;
    display: none;
    flex-direction: column;
    align-items: center;
}

.controls button {
    width: 60px;
    height: 60px;
    font-size: 20px;
    border-radius: 50%;
}

.row {
    display: flex;
    justify-content: center;
}
</style>

</head>

<body>

<h1>üêç Snake Game</h1>
<h4>by Bilal Tsaqib</h4>
<canvas id="game" width="400" height="400"></canvas>
<div class="score">Score: <span id="score">0</span></div>
<button onclick="togglePause()">‚è∏ Pause</button>

<div class="pause-menu" id="pauseMenu">
    <h2>Game Paused</h2>
    <label>Kecepatan:</label>
    <input type="range" min="50" max="300" step="10" id="speedControl">
    <p><span id="speedValue"></span> ms</p>
    <button onclick="togglePause()">‚ñ∂ Lanjut</button>
</div>

<!-- Mobile Controls -->
<div class="controls" id="mobileControls">
    <div class="row">
        <button onclick="setDirection('UP')">‚¨Ü</button>
    </div>
    <div class="row">
        <button onclick="setDirection('LEFT')">‚¨Ö</button>
        <button onclick="setDirection('DOWN')">‚¨á</button>
        <button onclick="setDirection('RIGHT')">‚û°</button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const box = 20;

let snake = [{x: 200, y: 200}];
let direction = "RIGHT";
let food = randomFood();
let score = 0;
let speed = 150;
let game;
let paused = false;

const speedControl = document.getElementById("speedControl");
const speedValue = document.getElementById("speedValue");
speedControl.value = speed;
speedValue.innerText = speed;

speedControl.addEventListener("input", function(){
    speed = this.value;
    speedValue.innerText = speed;
    if(!paused){
        clearInterval(game);
        game = setInterval(draw, speed);
    }
});

function randomFood(){
    return {
        x: Math.floor(Math.random()*20)*box,
        y: Math.floor(Math.random()*20)*box
    };
}

document.addEventListener("keydown", e=>{
    if(e.key === "p" || e.key === "P") togglePause();
    if(e.key === "ArrowLeft") setDirection("LEFT");
    if(e.key === "ArrowUp") setDirection("UP");
    if(e.key === "ArrowRight") setDirection("RIGHT");
    if(e.key === "ArrowDown") setDirection("DOWN");
});

function setDirection(dir){
    if(dir==="LEFT" && direction!=="RIGHT") direction="LEFT";
    if(dir==="RIGHT" && direction!=="LEFT") direction="RIGHT";
    if(dir==="UP" && direction!=="DOWN") direction="UP";
    if(dir==="DOWN" && direction!=="UP") direction="DOWN";
}

function togglePause(){
    paused = !paused;
    document.getElementById("pauseMenu").style.display = paused ? "block" : "none";
    if(paused){
        clearInterval(game);
    } else {
        game = setInterval(draw, speed);
    }
}

function draw(){
    ctx.fillStyle="#111";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Food (animasi pulse)
    ctx.save();
    ctx.shadowBlur=20;
    ctx.shadowColor="red";
    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(food.x+box/2,food.y+box/2,box/2*(1+0.1*Math.sin(Date.now()/200)),0,Math.PI*2);
    ctx.fill();
    ctx.restore();

    // Snake
    for(let i=0;i<snake.length;i++){
        ctx.fillStyle=i===0?"cyan":"lime";
        ctx.shadowBlur=10;
        ctx.shadowColor="cyan";
        ctx.fillRect(snake[i].x,snake[i].y,box,box);
    }

    let headX=snake[0].x;
    let headY=snake[0].y;

    if(direction==="LEFT") headX-=box;
    if(direction==="RIGHT") headX+=box;
    if(direction==="UP") headY-=box;
    if(direction==="DOWN") headY+=box;

    if(headX===food.x && headY===food.y){
        score++;
        document.getElementById("score").innerText=score;
        food=randomFood();
    } else {
        snake.pop();
    }

    let newHead={x:headX,y:headY};

    if(headX<0||headY<0||headX>=canvas.width||headY>=canvas.height||collision(newHead,snake)){
        clearInterval(game);
        alert("Game Over! Score: "+score);
        location.reload();
    }

    snake.unshift(newHead);
}

function collision(head,array){
    for(let i=0;i<array.length;i++){
        if(head.x===array[i].x && head.y===array[i].y){
            return true;
        }
    }
    return false;
}

function detectMobile(){
    if(window.innerWidth < 768){
        document.getElementById("mobileControls").style.display="flex";
    }
}

detectMobile();
game=setInterval(draw,speed);
</script>

</body>
</html>
